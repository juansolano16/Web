var tablaMoto;var tbl_select;function recibeJsonInvMoto(json){$('input[name="cod_comprobante"]').val(json['comprobante']);llenarTabla(json['data'],'data1')};function recibeJsonInvRep(json){$('input[name="cod_comprobante"]').val(json['comprobante']);llenarTabla(json['data'],'tablaRep')};function recibeJsonInvAuvi(json){$('input[name="cod_comprobante"]').val(json['comprobante']);llenarTabla(json['data'],'tablaAuvi')};function llenarTabla(list,id,columns=[],columnDefs=[],modal='N'){var vcolumns=[{"data":"cod_agencia"},{"data":"agencia"},{"data":"total_prod"},{"data":"registrados"},{"data":"porcentaje"},{"data":"sobrante"},{"data":"porcentaje"},];var vcolumnDefs=[{targets:[2,3,4],class:'text-center',},{targets:[-1],class:'text-center',orderable:false,render:function(data,type,row){var buttons='<a href="#" type="button" onclick="ingresarInvModal(this)" class="btn btn-warning btn-xs btn-flat"><i class="fas fa-edit"></i></a>';buttons+='<a href="#" type="button" onclick="ingresarInvModal(this)" class="btn btn-warning btn-xs btn-flat"><i class="fas fa-edit"></i></a>';return buttons;}},];if(columns.length)vcolumns=columns;if(columnDefs.length)vcolumnDefs=columnDefs;var tbl=$('#'+id).DataTable({responsive:true,autoWidth:false,destroy:true,deferRender:true,pageLength:100,data:list,columns:vcolumns,columnDefs:vcolumnDefs,initComplete:function(settings,json){},});tbl.rows().nodes().to$().css("font-size","90%");tbl.columns.adjust();$('#'+id).on('order.dt',function(){tbl.rows().nodes().to$().css("font-size","90%");});if(modal=='N')tbl_select=tbl;};function showDatosGrabadosInvModal(json){var vcolumns=[{"data":"cod_producto"},{"data":"serie"},{"data":"sobrante"},{"data":"faltante"},{"data":"estado"},{"data":"kit"},{"data":"observacion1"},{"data":"observacion2"},];var vcolumnDefs=[{targets:[2,3,4],class:'text-center',},];llenarTabla(json['data'],'modal_tabla1',columns=vcolumns,columnDefs=vcolumnDefs,modal='S')
$('.modal-dialog').removeClass().addClass('modal-dialog modal-xl');$('#modalform1').modal('show');};function ingresarInvModal(element){$('input[name="action"]').val('grabarEstadoInv');modal_title.find('span').html('Resultado Inventario');modal_title.find('i').removeClass().addClass('fas fa-tasks');var tr=tbl_select.cell($(element).closest('td, li')).index();var data=tbl_select.row(tr.row).data();var url=window.location.pathname;var data_={'action':'searchResultadoGrabado','cod_agencia':data.cod_agencia,'categoria':select_tab}
sendDataAjax(url,data_,showDatosGrabadosInvModal);};;